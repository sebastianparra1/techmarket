<ion-content class="ion-padding">
  <form (submit)="pagarPremium()">
    <div class="card-preview-container">
      <div class="credit-card" [class.flipped]="mostrarTrasera">
        <div class="front">
          <div class="shine"></div>
          <div class="top-bar">
            <img *ngIf="logoTarjeta" [src]="logoTarjeta" class="card-logo" alt="Tipo de tarjeta" />
          </div>
          <div class="card-number">{{ numeroFormateado || '•••• •••• •••• ••••' }}</div>
          <div class="card-name">{{ nombreTitular || 'NOMBRE DEL TITULAR' }}</div>
          <div class="card-expiry">{{ vencimiento || 'MM/AA' }}</div>
        </div>
        <div class="back">
          <div class="cvv-label">CVV</div>
          <div class="cvv-value">{{ cvv || '•••' }}</div>
        </div>
      </div>
    </div>

    <ion-card>
      <ion-card-header>
        <ion-card-title>Adquirir Plan Premium</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <!-- Número de tarjeta -->
        <ion-item>
          <ion-label position="stacked">Número de tarjeta</ion-label>
          <ion-input type="text" [value]="numeroFormateado" (ionInput)="actualizarNumero($event)" maxlength="19" inputmode="numeric" placeholder="Número de tarjeta"></ion-input>
        </ion-item>

        <!-- Nombre del titular -->
        <ion-item>
          <ion-label position="stacked">Nombre del titular</ion-label>
          <ion-input type="text" [(ngModel)]="nombreTitular" name="titular" placeholder="Nombre Apellido"></ion-input>
        </ion-item>

        <!-- Vencimiento y CVV -->
        <ion-grid>
          <ion-row>
            <ion-col size="8">
              <ion-item>
                <ion-label position="stacked">Vencimiento (MM/AA)</ion-label>
                <ion-input type="text" [value]="vencimiento" (ionInput)="actualizarVencimiento($event)" maxlength="5" placeholder="MM/AA"></ion-input>
              </ion-item>
            </ion-col>
            <ion-col size="4">
              <ion-item>
                <ion-label position="stacked">CVV</ion-label>
                <ion-input type="text" [value]="cvv" (ionInput)="actualizarCVV($event)" (ionfocus)="mostrarTrasera = true" (ionblur)="mostrarTrasera = false" maxlength="3" placeholder="123"></ion-input>
              </ion-item>
            </ion-col>
          </ion-row>
        </ion-grid>

        <!-- Datos del comprador -->
        <ion-item>
          <ion-label position="stacked">Nombre</ion-label>
          <ion-input [(ngModel)]="nombre" name="nombre" required></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Apellido</ion-label>
          <ion-input [(ngModel)]="apellido" name="apellido" required></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Correo electrónico</ion-label>
          <ion-input [(ngModel)]="emailComprador" name="emailComprador" type="email" required></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Código Postal</ion-label>
          <ion-input [(ngModel)]="codigoPostal" name="codigoPostal" required></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">RUT</ion-label>
          <ion-input [(ngModel)]="rut" name="rut" (ionInput)="filtrarRut($event)" placeholder="Ej: 12345678k" required></ion-input>
        </ion-item>

        <!-- Botón de pago -->
        <ion-button expand="block" type="submit" color="primary" class="ion-margin-top">
          Pagar y Activar Premium
        </ion-button>
      </ion-card-content>
    </ion-card>
  </form>
</ion-content>
